
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>统计图表-WeAdmin Frame型后台管理系统-WeAdmin 1.0</title>
        <meta name="renderer" content="webkit|ie-comp|ie-stand">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta http-equiv="Cache-Control" content="no-siteapp" />
		<link rel="stylesheet" href="../../static/css/font.css">
		<link rel="stylesheet" href="../../static/css/weadmin.css">
		<script src="../../static/js/echarts.js"></script>
		<!--  引入  jquery -->
		<script type="text/javascript" src="../../static/js/jquery-1.12.4.js"></script>
		<!--  引入 layui    -->
		<link rel="stylesheet" href="../../lib/layui/css/layui.css">
		<script src="../../lib/layui/layui.js" charset="utf-8"></script>
    </head>
    <body>
    	<form class="layui-form"  style="width: 200px;" onsubmit="return false" >
			<div class="demoTable " style="margin-left: 100px;border: 0px solid red;width: 1100px;height: 80px ">
						  <div style="width: 200px;float: left;border: 0px solid red;">
						  		   开始时间2：
						  		    <input type="text" name="date" id="startDate" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
						  		   
						  </div>
						   <div style="width: 200px;float: left;border: 0px solid red;">
						  		   结束时间：
						  <input type="text" name="date" id="endDate" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
						  		   
						  </div>
						  
						  <div style="width: 100px;float: left;margin-top: 17px;border: 0px solid red; ">
						  		  <button class="layui-btn" data-type="reload">搜索</button>
						  </div>
			</div>
		</form>
    	
    
    
        <div class="weadmin-body" style="border: 0px solid red; ">
            <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
            <div id="main" style="width: 1000px;height:400px;"></div>
          
        </div>
        
     
       
       
       
       	<script>
		layui.use(['table','laydate'],function() {
							var table = layui.table, form = layui.form;
							var layer = layui.layer,laydate = layui.laydate;
							
							//日期
							  laydate.render({
								    elem: '#startDate'
							  });
							  laydate.render({
							    elem: '#endDate'
							  });
							
				
							 /*     按钮事件   */
							var $ = layui.$, active = {
							reload:function() {
									/* 搜索 框里面的值  */
									var startDate = $('#startDate');
									var endDate = $('#endDate');
									load(startDate.val(),endDate.val());
								}
							};
							 
							
							 

							$('.demoTable .layui-btn').on('click', function() {
								var type = $(this).data('type');
								active[type] ? active[type].call(this) : '';
							});
			});
	</script>
       
    <script type="text/javascript">
    // 初始化 折线图
    startLoad();
    function startLoad(){
    	var date = new Date();
    	//   load(new Date() );
    	var y=date.getFullYear();
    	var m=date.getMonth()+1;
    	var d=date.getDate()+1;
		var ymd=y+"-"+m+"-"+d;
    	
    	load("",ymd);
    } 
    
    
    function load(startTime,endTime){
		 $.ajax(
					{
						url:"../../../logBL",
						type:"post",
						data:"startTime="+startTime+"&endTime="+endTime,
						dataType:"json",
						success:function(  result ){
							if (result.code!="0") {
								layer.msg(result.msg)
							}else{
								var list=result.data;
								
								var count=0;
								var per = new Array();
								var dat= new Array();
								
								for (var i = list.length-1; i>=0; i--) {
									per[count]=list[i].date;
									dat[count++]=list[i].count;
								}
																						
							    // 基于准备好的dom，初始化echarts实例
							    var myChart = echarts.init(document.getElementById('main'));
						        // 指定图表的配置项和数据
						       var options = {
									            title: {
									                text: '用户登入统计'
									            },
									            tooltip: {
									                trigger: 'axis'
									            },
									            legend: {
									                data:['用户登入统计']
									            },
									            grid: {
									                left: '3%',
									                right: '4%',
									                bottom: '3%',
									                containLabel: true
									            },
									            toolbox: {
									                feature: {
									                    saveAsImage: {}
									                }
									            },
									            xAxis: {
									                type: 'category',
									                boundaryGap: false,
									                data: per
									            },
									            yAxis: {
									                type: 'value'
									            },
									            series: [
									                {
									                    name:'登入量',
									                    type:'line',
									                    stack: '总量',
									                    data:dat
									                }
									            ]
									        };
						        // 使用刚指定的配置项和数据显示图表。
						        myChart.setOption(options);
								
							}// 获取 结果  展示 到页面
						}
					}		
				);// ajax 结束
		 
	 }
    </script>   
       
    </body>
</html>