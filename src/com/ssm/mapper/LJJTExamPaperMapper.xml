<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ssm.dao.TExamPaperMapper">
	<resultMap type="com.ssm.pojo.TExamPaper" id="TExamPaperMap">
		<id property="id" column="id"/>
		<result property="examPaperTitle" column="exam_paper_title"/>
		<result property="examPaperTotalScroe" column="exam_paper_total_scroe"/>
		<result property="examPaperType" column="exam_paper_type"/>
		<result property="qualifiedPoints" column="qualified_points"/>
		<result property="createTime" column="create_time"/>
		<result property="createTimes" column="create_time"/>
		<result property="updateTime" column="update_time"/>
		<result property="updateTimes" column="update_time"/>
	</resultMap>
	<resultMap type="com.ssm.vo.LJJTackPaperVo" id="LJJTackPaperVoMap">
		<result property="id" column="id" />
		<result property="examPaperTitle" column="exam_paper_title" />
	</resultMap>
	<resultMap type="com.ssm.vo.LJJPerformanceVo" id="LJJPerformanceVoMap"></resultMap>
	<!-- 查询试卷 -->
	<select id="selectTExamPaper" resultMap="TExamPaperMap">
		SELECT * FROM t_exam_paper
	</select>
	<insert id="missionAdd" parameterType="com.ssm.pojo.TExamPublish">
		INSERT INTO 
			t_exam_publish
			(clazz_id,exam_id,start_time,end_time,publish_person,current_type)
		VALUES
			(#{clazzId},#{examId},#{startTimes},#{endTimes},#{publishPerson},#{currentType})
	</insert>
	<!-- 根据任务找到试卷，查出成绩 -->
	<select id="selectTask" resultMap="LJJTackPaperVoMap">
		SELECT
			ep.id,
			e.exam_paper_title 
		FROM
			t_exam_publish ep,
			t_exam_paper e 
		WHERE
			ep.exam_id = e.id 
		AND clazz_id=#{clazzId}
	</select>
	<select id="selectPerformance" resultMap="LJJPerformanceVoMap">
		SELECT
			u.username,
			e.score 
		FROM
			t_exam_record e,
			t_user u 
		WHERE
			e.student_id = u.id 
		AND exam_pulish_id =#{taskId}
	</select>
</mapper>